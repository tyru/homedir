#!/usr/bin/env perl

# via http://d.hatena.ne.jp/holidays-l/20080824/p1
use ExtUtils::Install;
use ExtUtils::Installed;

unshift @ARGV,new ExtUtils::Installed;
sub a{ \@ARGV }
uninstall(
    (
        eval { a->[0]->packlist(a->[1]) } || do {
            require CPAN;
            a->[0]->packlist(
                CPAN::Shell->expandany(a->[1])->distribution->base_id
                    =~m/(.*)-[^-]+$/
            );
        }
    )->packlist_file,
    1,
    a->[2]
)

